@if (isGameOver$ | async) {
  <app-restart-game />
} @else if (!isPlay()) {
  <app-start-game />
}

<div class="field">
  <app-field-canvas
    [appActionFigure]="fieldPosition()"
    [class.game-over]="isGameOver$ | async"
    (appHoverPosition)="setPosition($event)"
  />
  @if ((isGameOver$ | async) === false) {
    @if (figure$ | async; as figure) {
      @if (lowestPosition$ | async; as position) {
        <app-figure-canvas
          appTranslateFigure
          class="figure"
          [color]="(color$ | async) ?? 'default'"
          [figure]="figure"
          [position]="position"
          [isDotted]="true"
        />
      }
      <app-figure-canvas
        appTranslateFigure
        class="figure"
        [color]="(color$ | async) ?? 'default'"
        [figure]="figure"
        [position]="(position$ | async)!"
      />
    }
  }
</div>

@if ((isGameOver$ | async) !== isPlay()) {
  <app-right-panel />
}
